# dict_to_pg

## Архитектура

- **config.py** — содержит константы для конфигурирования задания.
- **service.py** — содержит класс для взаимодействия с БД и upsert записей.
- **create_db.py** — скрипт для создания локальной базы данных и предоставления прав пользователю.
- **helpers.py** — вспомогательные функции для сериализации, определения типа данных, генерации алиасов и т.д.
- **logger.py** — класс для логирования сообщений уровней INFO и ERROR.
- **dict_to_pg.py** — основной скрипт, выполняющий весь функционал по вставке/обновлению данных из словарей.

---

## Требования

1. Установлен PostgreSQL 17 локально
2. Установлен poetry `version = 0.1.0` для установки pcycopg2
3. Клиент `psql` должен быть доступен в PATH. Для Windows путь должен быть `C:\Program Files\PostgreSQL\17\bin\psql.exe`

---

## Установка и запуск

1. Установите [Poetry](https://python-poetry.org/) ( версия `0.1.0` для проекта).
2. Установите зависимости:
    ```bash
    poetry install
    ```
---

## Файл `.env` 

Создайте файл `.env` в директории task1/ по примеру `.env.example`. Пользователь, пароль и название БД подхватятся из этого файла.

---
## Локальная настройка базы данных PostgreSQL

Для запуска локальной базы данных используйте скрипт `create_db.py`


### Перейдите в директорию task1

### Linux / macOS
```bash
cd prompai-tasks/task1/
```

### Windows
```bash
cd prompai-tasks\task1\
```

### Linux / macOS

Откройте терминал и выполните команду:

```bash
python3 create_db.py
```

### Windows

Откройте PowerShell или Командную строку (cmd) и выполните команду:

```bash
python create_db.py
```